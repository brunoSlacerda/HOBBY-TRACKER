<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hobby Tracker Pro</title>
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="style/corridas.css">
    <style>
        /* Pequeno ajuste para esconder as se√ß√µes por padr√£o */
        .secao-hobby { display: none; margin-top: 15px; border-top: 1px dashed #ccc; padding-top: 15px; }
        .capa-livro { width: 50px; height: 75px; object-fit: cover; border-radius: 4px; float: left; margin-right: 10px; }
        .badge { display: inline-block; padding: 2px 8px; border-radius: 12px; font-size: 0.8em; color: white; background: #666; }
        .badge-corrida { background: #e67e22; }
        .badge-leitura { background: #3498db; }
        .badge-treino { background: #e74c3c; }
        .badge-trabalho { background: #9b59b6; }
    </style>
</head>
<body>
    <h1>üöÄ Hobby Tracker</h1>

    <div id="tela-home" class="tela ativa">
        
        <div class="card">
            <h3>Novo Registro</h3>
            <label>O que voc√™ fez hoje?</label>
            <select id="tipo" onchange="verificarTipo()">
                <option value="">-- Selecione --</option>
                <option value="livro">üìö Leitura</option>
                <option value="corrida">üèÉ‚Äç‚ôÇÔ∏è Corrida</option>
                <option value="treino">üí™ Treino</option>
                <option value="trabalho">üíº Trabalho</option>
            </select>

            <div id="campos-livro" class="secao-hobby">
                <div style="background: #eef2ff; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                    <label>üîç Buscar Google Books:</label>
                    <div style="display: flex; gap: 5px;">
                        <input type="text" id="busca-titulo" placeholder="Nome do livro...">
                        <button onclick="buscarLivro()" style="width: 30%; background: #4a69bd;">Buscar</button>
                    </div>
                    <div id="resultado-livro" style="font-size: 0.9em; margin-top: 5px; color: #555;"></div>
                </div>
                <input type="text" id="livro-titulo" placeholder="T√≠tulo">
                <input type="text" id="livro-autor" placeholder="Autor">
                <input type="number" id="livro-paginas" placeholder="Total P√°ginas">
                <input type="hidden" id="livro-capa">
            </div>

            <div id="campos-corrida" class="secao-hobby">
                <input type="number" id="corrida-dist" placeholder="Dist√¢ncia (Km)" step="0.1">
                <input type="number" id="corrida-tempo" placeholder="Tempo (min)">
                <select id="corrida-tipo">
                    <option value="Rodagem">üê¢ Rodagem</option>
                    <option value="Longo">üèÉ‚Äç‚ôÇÔ∏è Long√£o</option>
                    <option value="Tiro">‚ö° Tiro</option>
                </select>
                <input type="text" id="corrida-local" placeholder="Local">
            </div>

            <div id="campos-treino" class="secao-hobby">
                <input type="text" id="treino-foco" placeholder="Foco (ex: Perna)">
                <input type="number" id="treino-duracao" placeholder="Dura√ß√£o (min)">
                <select id="treino-carga">
                    <option value="Moderada">üòê Moderada</option>
                    <option value="Pesada">üò´ Pesada</option>
                </select>
            </div>

            <div id="campos-trabalho" class="secao-hobby">
                <input type="number" id="trab-tarefas" placeholder="Qtd. Tarefas">
                <select id="trab-prod">
                    <option value="3">‚≠ê‚≠ê‚≠ê Normal</option>
                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Top</option>
                </select>
                <input type="text" id="trab-obs" placeholder="Obs">
            </div>

            <button onclick="salvarHobby()" style="margin-top: 15px;">üíæ Salvar Registro</button>
        </div>

        <h3 style="margin-top: 30px;">Meu Painel</h3>
        <div class="grid-cards">
            <div class="card-menu" onclick="abrirDetalhes('livros')">
                <span>üìö</span>
                <h3>Livros</h3>
                <small>Ver hist√≥rico</small>
            </div>
            <div class="card-menu" onclick="abrirDetalhes('corridas')">
                <span>üèÉ‚Äç‚ôÇÔ∏è</span>
                <h3>Corridas</h3>
                <small>Ver hist√≥rico</small>
            </div>
            <div class="card-menu" onclick="abrirDetalhes('treinos')">
                <span>üí™</span>
                <h3>Treinos</h3>
                <small>Ver hist√≥rico</small>
            </div>
            <div class="card-menu" onclick="abrirDetalhes('trabalho')">
                <span>üíº</span>
                <h3>Trabalho</h3>
                <small>Ver hist√≥rico</small>
            </div>
        </div>
    </div>

    <div id="tela-detalhes" class="tela">
        <button class="btn-voltar" onclick="voltarHome()">‚¨Ö Voltar</button>
        
        <div class="card">
            <h3 id="titulo-detalhe">Hist√≥rico</h3>
            
            <!-- Cita√ß√£o do Dia (s√≥ aparece para livros) -->
            <div id="citacao-do-dia-container" style="display: none;">
                <div class="citacao-do-dia">
                    <div class="citacao-header">
                        <span class="citacao-label">üí≠ Cita√ß√£o do Dia</span>
                        <button class="btn-gerenciar-citacoes" onclick="abrirModalCitacoes()" title="Gerenciar cita√ß√µes">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="citacao-texto" id="citacao-texto">
                        Carregando cita√ß√£o...
                    </div>
                    <div class="citacao-fonte" id="citacao-fonte"></div>
                </div>
            </div>
            
            <div id="lista-especifica"></div>

            <div id="area-kanban-livros" style="display: none;">
                <div class="kanban-container">
                    
                    <div class="kanban-coluna col-novo">
                        <div class="kanban-titulo">üìå A Ler</div>
                        <div id="lista-novos"></div>
                    </div>

                    <div class="kanban-coluna col-lendo">
                        <div class="kanban-titulo">üìñ Lendo</div>
                        <div id="lista-lendo"></div>
                    </div>

                    <div class="kanban-coluna col-concluido">
                        <div class="kanban-titulo">üèÜ Conclu√≠dos</div>
                        <div id="lista-concluidos"></div>
                    </div>

                </div>
            </div>

            <div id="area-kanban-corridas" style="display: none;">
                <div class="header-corridas">
                    <div class="header-corridas-left">
                        <button class="btn-navegar-semana" onclick="navegarSemana(-1)" title="Semana anterior">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <span class="info-semana" id="info-semana">Carregando...</span>
                        <button class="btn-navegar-semana" onclick="navegarSemana(1)" title="Pr√≥xima semana">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                    </div>
                    <button id="btn-sync-strava-corridas" onclick="sincronizarStrava()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="23 4 23 10 17 10"></polyline>
                            <polyline points="1 20 1 14 7 14"></polyline>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                        </svg>
                        Sincronizar Strava
                    </button>
                </div>
                
                <!-- Resumo da Semana -->
                <div id="resumo-semana-corridas" class="resumo-semana-corridas">
                    <div class="resumo-item">
                        <div class="resumo-icon">üìè</div>
                        <div class="resumo-content">
                            <div class="resumo-label">Dist√¢ncia Total</div>
                            <div class="resumo-value" id="total-km-semana">0 km</div>
                        </div>
                    </div>
                    <div class="resumo-item">
                        <div class="resumo-icon">‚è±Ô∏è</div>
                        <div class="resumo-content">
                            <div class="resumo-label">Tempo Total</div>
                            <div class="resumo-value" id="total-minutos-semana">0 min</div>
                        </div>
                    </div>
                </div>
                
                <div class="kanban-semana">
                    <div class="kanban-coluna-dia">
                        <div class="kanban-titulo-dia">Domingo</div>
                        <div id="corridas-domingo"></div>
                    </div>
                    <div class="kanban-coluna-dia">
                        <div class="kanban-titulo-dia">Segunda</div>
                        <div id="corridas-segunda"></div>
                    </div>
                    <div class="kanban-coluna-dia">
                        <div class="kanban-titulo-dia">Ter√ßa</div>
                        <div id="corridas-terca"></div>
                    </div>
                    <div class="kanban-coluna-dia">
                        <div class="kanban-titulo-dia">Quarta</div>
                        <div id="corridas-quarta"></div>
                    </div>
                    <div class="kanban-coluna-dia">
                        <div class="kanban-titulo-dia">Quinta</div>
                        <div id="corridas-quinta"></div>
                    </div>
                    <div class="kanban-coluna-dia">
                        <div class="kanban-titulo-dia">Sexta</div>
                        <div id="corridas-sexta"></div>
                    </div>
                    <div class="kanban-coluna-dia">
                        <div class="kanban-titulo-dia">S√°bado</div>
                        <div id="corridas-sabado"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-resumo" class="modal-overlay">
        <div class="modal-content">
            <h3 id="modal-titulo-livro">Resumo do Livro</h3>
            
            <label>Sua Nota (1 a 10):</label>
            <input type="number" id="modal-nota" min="1" max="10" style="width: 60px;">
            
            <label>Seu Resumo / Coment√°rios:</label>
            <textarea id="modal-texto" placeholder="O que voc√™ aprendeu com esse livro?"></textarea>
            
            <input type="hidden" id="modal-id-livro">
            
            <div style="text-align: right; margin-top: 10px;">
                <button onclick="fecharModal()" style="background: #ccc; width: auto;">Cancelar</button>
                <button onclick="salvarResumo()" style="background: #28a745; width: auto;">üíæ Salvar Avalia√ß√£o</button>
            </div>
        </div>
    </div>

    <!-- Modal de Gerenciamento de Cita√ß√µes -->
    <div id="modal-citacoes" class="modal-overlay">
        <div class="modal-content modal-citacoes">
            <div class="modal-header">
                <h3>üìù Gerenciar Cita√ß√µes</h3>
                <button class="btn-fechar-modal" onclick="fecharModalCitacoes()">√ó</button>
            </div>
            
            <div class="citacoes-livro-selector">
                <label>Selecione o livro:</label>
                <select id="select-livro-citacoes" onchange="carregarCitacoesLivro()">
                    <option value="">-- Selecione um livro --</option>
                </select>
            </div>
            
            <div id="area-citacoes-livro" style="display: none;">
                <div class="citacoes-header">
                    <h4 id="titulo-livro-citacoes"></h4>
                    <button class="btn-adicionar-citacao" onclick="adicionarNovaCitacao()">+ Adicionar Cita√ß√£o</button>
                </div>
                
                <div id="lista-citacoes-livro" class="lista-citacoes">
                    <!-- Cita√ß√µes ser√£o inseridas aqui -->
                </div>
            </div>
            
            <div id="form-nova-citacao" style="display: none;">
                <label>Nova Cita√ß√£o:</label>
                <textarea id="input-nova-citacao" placeholder="Digite a cita√ß√£o aqui..." rows="4"></textarea>
                <div style="text-align: right; margin-top: 10px;">
                    <button onclick="cancelarNovaCitacao()" style="background: #ccc; width: auto;">Cancelar</button>
                    <button onclick="salvarNovaCitacao()" style="background: #28a745; width: auto;">üíæ Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script/script.js"></script>
    <script src="script/corrida.js"></script>
    <script src="script/citacoes.js"></script>
</body>
</html>